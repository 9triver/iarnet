syntax = "proto3";

package peer;

import "proto/ignis.proto";

option go_package = "./proto";

service PeerService {
  rpc ExchangePeers(ExchangeRequest) returns (ExchangeResponse);
  rpc ExchangeProviders(ProviderExchangeRequest) returns (ProviderExchangeResponse);
  rpc CallProvider(ProviderCallRequest) returns (ProviderCallResponse);
}

message ExchangeRequest {
  repeated string known_peers = 1;  // List of peer addresses (e.g., "host:port")
}

message ExchangeResponse {
  repeated string known_peers = 1;
}

message ProviderExchangeRequest {
  repeated ignis.ProviderInfo providers = 1;
}

message ProviderExchangeResponse {
  repeated ignis.ProviderInfo providers = 1;
}

// Remote provider method calls
message ProviderCallRequest {
  string provider_id = 1;
  string method = 2;
  bytes payload = 3;  // Serialized method parameters
}

message ProviderCallResponse {
  bool success = 1;
  string error = 2;
  bytes result = 3;  // Serialized method result
}